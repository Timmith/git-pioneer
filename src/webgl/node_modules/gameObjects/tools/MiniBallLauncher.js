var three = require('three');
var BaseGun = require('./BaseGun');
var CheckerboardTexture = require('threejs-texture-checkerboard');

function SharpShooter(world, pos) {
	var geometry = new THREE.CylinderGeometry(0.065, 0.065, 1, 8, 1);
	var material = new three.MeshPhongMaterial({
		map: new CheckerboardTexture(0x007f00, 0x7fff7f)
	});
	BaseGun.call(this, world, pos, geometry, material);
	this.primaryFireStart = primaryFireStart.bind(this);
}

SharpShooter.prototype = Object.create(BaseGun.prototype);

var vel = new three.Vector3();
function primaryFireStart(pos, playerSize) {
	var zero = new three.Vector3();
	var zero2 = new three.Vector3();
	vel.subVectors(this.player.crosshair.localToWorld(zero2), this.player.camera.localToWorld(zero));
	vel.multiplyScalar(100);
	var ball = this.world.makeBall(pos, playerSize * 0.2, vel);
}

module.exports = SharpShooter;